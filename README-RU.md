# OpenComputersBridge
Библиотека для Kotlin/Java с клиентом OpenComputers для интеграции в ваше приложение.

P.s. [библиотека JSON](https://pastebin.com/ji28sbxU), нужно кинуть в ``/lib/JSON.lua`` на стороне OpenComputers.
# Фичи

* Выполнение существующих функций на удаленном устройстве OpenComputers (без компиляции, быстрый способ)
* Выполнение произвольного кода на удаленном устройстве OpenComputers (с компиляцией, медленный способ)
* Получение ивентов с фильтром (например, по умолчанию игнорируются множество ивентов пользовательского ввода)
* Возможность отправки любых сообщений через протокол из, например, event.listen (что крайне не рекомендуется, но возможность есть)
* Соединение с клиентом будет разорвано автоматически максимум через 10 секунд, если компьютер перестал функционировать (например, выгрузился чанк или отключился сервер), а соединение не разорвалось.

# Планы

* Написать эту же библиотеку на питоне
* Описать методы OpenComputers в библиотеке для быстрой разработки

# Описание работы 

Устройство подключается к библиотеке через протокол TCP (без шифрования), выбирает т.н. сервис, затем авторизуется и поддерживает соединение с библиотекой. 
Сервис создается приложением на стороне хоста.

При разрыве соединения устройство может подключиться снова, но одновременно два устройства не могут подключиться к одному сервису.

При удаленном вызове устройству передается т.н. очередь вызовов, из которой он будет брать операции для выполнения, выполнять и сохранять результат в память до полного завершения выполнения запроса.

Пример запроса:

```
{
  "type":"EXECUTE",
  "hash":"500",
  "call_stack":[{
      "function":["computer","beep"],
      "args":[2000,0.5],
      "type":"FUNCTION"
    },{
      "code":"computer.beep(2000, 0.5)",
      "type":"CODE"
    }
  ]
 }
```
Выполняет computer.beep(2000, 0.5) два раза.
